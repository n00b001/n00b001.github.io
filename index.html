<!DOCTYPE html>
<html>
<title>Leaders</title>
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.1/css/bootstrap.min.css" integrity="sha512-siwe/oXMhSjGCwLn+scraPOWrJxHlUgMBMZXdPe2Tnk3I0x3ESCoLz7WZ5NTH6SZrywMY+PB1cjyqJ5jAluCOg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css" integrity="sha512-5PV92qsds/16vyYIJo3T/As4m2d8b6oWYfoqV+vtizRB6KhF1F9kYzWzQmsO6T3z3QG2Xdhrx7FQ+5R1LiQdUA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>
<h1>Example Leadership Page</h1>
<p>&nbsp;</p>
<h2>Our Leaders:</h2>
<p>&nbsp;</p>
<figure class="table" id="table1" style="display: none;">
</figure>
<div
  class="cf-turnstile"
  data-sitekey="0x4AAAAAAAkwv-pXsT8kighB"
  data-callback="javascriptCallback"
></div>

<script>
// This function is called when the Turnstile script is loaded and ready to be used.
// The function name matches the "onload=..." parameter.
function javascriptCallback(token) {
    console.debug('javascriptCallback called with token:', token);

    // Set up the API URL and send the token as a query parameter
    const apiUrl = `https://us-central1-leaders-436809.cloudfunctions.net/get-leaders?response=${token}`;

    // Fetch the data from the API
    fetch(apiUrl)
      // .then(response => response.json()) // Assuming the API returns JSON data
      .then(data => {
          // Assuming 'data.content' contains the HTML or text to be placed in the div
          const tableDiv = document.getElementById("table1");
          tableDiv.innerHTML = data;  // Set the div's content
          tableDiv.style.display = "block";   // Make the div visible
      })
      .catch(error => {
          console.error('Error fetching API:', error);
      });
}
</script>
</body>
</html>
